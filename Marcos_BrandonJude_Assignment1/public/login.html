<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./login_styles.css">

</head>

<!-- This is the login page for the website.
     User is instructed to sign in with their username and password.
     If server detects non-existent username or incorrect password, 
     user is redirected back to login page. -->

<script>
    //when the page loads, run the following function 
    window.onload = function () {
        // check the URL for existence of paramters, assign the query string to varaible params
        let params = (new URL(document.location)).searchParams;
        //if the non_existent_user parameter exists
        if (params.has("non_existent_user")){
            //alert user that the username does not exist
            document.getElementById('username_span').innerHTML = 'User does not exist';
            //grab username from params and place back into input textbox
            document.getElementById('username').value = params.get('non_existent_user');
            //change the class name to 'highlight' 
            document.getElementById('username').className = 'highlight';
        // else if user does exist, but has wrong_password parameter
        } else if (params.has("wrong_password")) {
            //alert user of incorrect password
            document.getElementById('password_span').innerHTML = 'Incorrect password';
            ////grab username from params and place back into input textbox
            document.getElementById('username').value = params.get('wrong_password');
            //change class name to highlight 
            document.getElementById('password').className = 'highlight';
        
        //if the user registers, they will be redirected to this login page with parameter 'registration_successful'
        //if that parameter exists, then alert user of successful registration and ask to sign in 
        } else if (params.has("registration_successful")){
            document.getElementById('registration_completed').innerHTML = "Registration successful! Sign in below.";
        }
    }
</script>




<body>

<div class="login_form">

    <form action="/try_login" method="post">
        <h2>Sign In</h2>
        <br>
        <p id="registration_completed"></p>
        <br>
        <input type="text" name="username" id="username" placeholder="Username">
        <p id="username_span"></p>
        <br>
        <input type="password" name="password" id="password" placeholder="Password">
        <p id="password_span"></p>
        <br>
        <input type="submit" name="submit_button" id="submit_button" value="Login"> 
        <br>
        <input type="button" name="go_to_register" id="go_to_register" value="Register" onclick="location.href = './register.html';">

    </form>
   


</div>


    
</body>
</html>